# 🔧 CONFIGURATION FILE - TELEGRAM VIDEO DOWNLOADER BOT
# Versiunea: 2.0.0 - Arhitectura Modulară
# Data: 09/08/2025

# 🚀 Configurații aplicație
app:
  name: "Telegram Video Downloader Bot"
  version: "2.0.0"
  debug: false
  timezone: "UTC"

# 🌐 Server configuration
server:
  host: "0.0.0.0"
  port: 5000
  workers: 1  # Free tier optimized
  timeout: 30
  keepalive: 2

# 📡 Telegram Bot Configuration
telegram:
  token: "${TELEGRAM_BOT_TOKEN}"
  webhook_url: "${WEBHOOK_URL}"
  max_connections: 5  # Free tier optimized
  allowed_updates: ["message", "callback_query"]
  drop_pending_updates: true

# 🎥 Platforme suportate cu configurații specifice
# IMPORTANT: Telegram Bot API are limită de 50MB pentru fișiere
platforms:
  youtube:
    enabled: true
    priority: 1
    max_file_size_mb: 45  # Limită Telegram: 50MB (45MB pentru siguranță)
    max_duration_seconds: 3600
    rate_limit_per_minute: 10
    retry_attempts: 3
    client_rotation: ["mweb", "tv_embedded", "web_safari", "android_vr"]
    po_token_handling: true
    
  instagram:
    enabled: true
    priority: 2
    max_file_size_mb: 45  # Limită Telegram: 50MB (45MB pentru siguranță)
    max_duration_seconds: 1800
    rate_limit_per_minute: 15
    retry_attempts: 3
    session_management: true
    public_fallback: true
    
  tiktok:
    enabled: true
    priority: 3
    max_file_size_mb: 45  # Limită Telegram: 50MB (45MB pentru siguranță)
    max_duration_seconds: 600
    rate_limit_per_minute: 20
    retry_attempts: 2
    watermark_removal: true
    
  facebook:
    enabled: true
    priority: 4
    max_file_size_mb: 45  # Limită Telegram: 50MB (45MB pentru siguranță)
    max_duration_seconds: 3600
    rate_limit_per_minute: 8
    retry_attempts: 4
    url_normalization: true
    api_versions: ["v19.0", "v18.0", "v17.0"]
    
  twitter:
    enabled: true
    priority: 5
    max_file_size_mb: 45  # Limită Telegram: 50MB (45MB pentru siguranță)
    max_duration_seconds: 1200
    rate_limit_per_minute: 12
    retry_attempts: 3
    
  # 🆕 Platforme noi
  threads:
    enabled: true
    priority: 6
    max_file_size_mb: 45  # Limită Telegram: 50MB (45MB pentru siguranță)
    max_duration_seconds: 900
    rate_limit_per_minute: 10
    retry_attempts: 2
    
  pinterest:
    enabled: true
    priority: 7
    max_file_size_mb: 45  # Limită Telegram: 50MB (45MB pentru siguranță)
    max_duration_seconds: 600
    rate_limit_per_minute: 15
    retry_attempts: 2
    
  reddit:
    enabled: true
    priority: 8
    max_file_size_mb: 45  # Limită Telegram: 50MB (45MB pentru siguranță)
    max_duration_seconds: 1800
    rate_limit_per_minute: 10
    retry_attempts: 3
    
  vimeo:
    enabled: true
    priority: 9
    max_file_size_mb: 45  # Limită Telegram: 50MB (45MB pentru siguranță)
    max_duration_seconds: 7200
    rate_limit_per_minute: 5
    retry_attempts: 3
    
  dailymotion:
    enabled: true
    priority: 10
    max_file_size_mb: 45  # Limită Telegram: 50MB (45MB pentru siguranță)
    max_duration_seconds: 3600
    rate_limit_per_minute: 8
    retry_attempts: 2

# 💾 Cache configuration
cache:
  enabled: true
  type: "memory"  # Pentru Free Tier
  max_size_mb: 50
  default_ttl: 3600  # 1 hour
  cleanup_interval: 300  # 5 minutes
  
# ⚡ Performance optimizations
performance:
  cold_start_optimization: true
  preload_critical_platforms: ["youtube", "instagram", "tiktok", "facebook"]
  max_concurrent_downloads: 2  # Free tier limit
  memory_limit_mb: 200
  cleanup_after_download: true
  
# 🛡️ Rate limiting
rate_limiting:
  enabled: true
  default_per_minute: 10
  per_user_per_minute: 5
  burst_allowance: 3
  cleanup_interval: 60
  
# 📊 Monitoring și logging
monitoring:
  enabled: true
  log_level: "INFO"
  log_format: "json"
  metrics_collection: true
  health_check_interval: 30
  
# 🔒 Security
security:
  input_validation: true
  url_whitelist_enabled: false  # Pentru flexibilitate
  max_url_length: 2048
  sanitize_filenames: true
  
# 🌍 Localization (pregătit pentru viitor)
localization:
  default_language: "ro"
  supported_languages: ["ro", "en"]
  fallback_language: "en"
  
# 📝 Message templates
messages:
  welcome: "🎬 Bun venit la Video Downloader Bot!\n\n📱 Trimite-mi un link de pe platformele suportate!"
  processing: "⚡ Procesez video-ul, te rog așteaptă..."
  success: "✅ Video descărcat cu succes!"
  error_generic: "❌ A apărut o eroare. Te rog încearcă din nou."
  rate_limit: "⏳ Prea multe request-uri. Te rog așteaptă {seconds} secunde."
  platform_not_supported: "❌ Această platformă nu este suportată momentan."
  
# 🔧 Retry strategies
retry:
  strategies:
    network_error:
      type: "exponential_backoff"
      max_attempts: 3
      base_delay: 2
      max_delay: 30
      
    rate_limit:
      type: "fixed_delay"
      max_attempts: 2
      delay: 60
      
    parsing_error:
      type: "no_retry"
      max_attempts: 0
      
    platform_error:
      type: "platform_fallback"
      max_attempts: 2
      delay: 5

# 🐳 Docker configuration (pentru viitorul deployment)
docker:
  base_image: "python:3.11-slim"
  working_dir: "/app"
  exposed_port: 5000
  health_check_path: "/health"
  
# ☁️ Deployment specific
deployment:
  platform: "render"  # sau "railway", "heroku", etc.
  auto_scaling: false  # Free tier
  health_check_path: "/health"
  startup_probe_path: "/ready"
  
# 📁 File management
files:
  temp_dir: "/tmp"
  max_temp_files: 10
  cleanup_older_than: 300  # 5 minutes
  allowed_extensions: [".mp4", ".mkv", ".webm", ".mov", ".avi"]
  
# 🔍 Debug și development
debug:
  enabled: false
  verbose_logging: false
  save_debug_info: false
  development_mode: false
